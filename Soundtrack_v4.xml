<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Sunday, August 26, 2022, 0:08 PM -->
<!-- MuClient version 4.94 -->

<!-- Plugin "soundtrack_v4.1" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Soundtrack"
   author="Mickey"
   id="2812cc86fb39043b1ff7da59"
   language="Lua"
   purpose="Plays a soundtrack while you disc! Based on Kilstrin Soundtrack_v4.zip (Broken link)"
   date_written="2022-08-26 00:08:00"
   requires="4.94"
   version="4.1"
   >

</plugin>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?Queued command: look$"
   omit_from_output="n"
   regexp="y"
   script="end_startup_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^You are already playing\.$"
   omit_from_output="n"
   regexp="y"
   script="end_startup_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^Welcome to Discworld: the stuff of which dreams are made\.$"
   omit_from_output="n"
   regexp="y"
   script="startup_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You open the .* doors?\.$"
   omit_from_output="n"
   regexp="y"
   script="opendoor"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You close the .* doors?\.$"
   omit_from_output="n"
   regexp="y"
   script="closedoor"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You bury .* corpses? .*\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You prepare to attack .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You stop fighting .*\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?.* You decide to teach .* a lesson\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   custom_colour="17"
   colour_change_type="1"
   other_text_colour="green"
   match="^(?:> )?.* aggressively towards you\!$"
   omit_from_output="n"
   sequence="100"
   regexp="y"
   script="fight_sound"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="n"
   custom_colour="17"
   colour_change_type="1"
   other_text_colour="red"
   match="^(?:> )?You are not fighting anyone\.$"
   omit_from_output="n"
   sequence="100"
   regexp="y"
   script="stop_fight_sound"
  >	 
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You tidy up the place, clearing away .* corpses? of .*\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?Noting the intentions of the .*, you move in to assist .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?.* buries .* corpses? .*\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?.* (corpse|corpses) of .* over the side of the (boat|wall)\."
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You stop (hunting|fighting) .*\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >	
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?.* attacks you from behind\.  You recall .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You .* sneak around .* without being spotted and manage to catch .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You hold your cover as you skil.*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?.*ou sneak around .* prepare .* backstab.*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You draw .* from its scabbard and make a sweeping slash at .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You prepare to shout .* upon joining combat\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You have lost the moment, and the warcry dies unuttered on your lips\.$"
   omit_from_output="n"
   regexp="y"
   script="stop_fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* winces\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The feather flies off and thuds into .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The black mist washes over .* causing its skin to crackle and burn as if it were splashed with acid\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* stiffens and then contorts in terror\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The cyclone swirls around you\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The cloud rolls unstoppably across everything around you\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You move your hand and the ball of fire zooms out into the immediate vicinity and sweeps over everything\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?A ray of hot golden light leaps towards .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?A mass of shadow suddenly comes alive, forming into humanoid shape\.  With a terrible laugh it hurls itself towards .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?A bolt of lightning arrives from above, washes through your body and leaps off towards .*\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?A crackling blue serpent arrives from above, and flies toward .* in a flash of fury\.$"
   omit_from_output="n"
   regexp="y"
   script="fight_sound"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* arrives and pulls to a stop\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* comes to a grinding halt\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* Ferry arrives and pulls to a stop\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* Ferry comes to a stop\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The Saucy Catfish has docked\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The ferry arrives with a muffled thud as its prow touches the bank\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The .* Ankh ferry stops with a soft thud as its prow touches the bank\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?A small ferry pulls up against the bank and comes to a halt.  A gangplank is lowered, allowing access onto the ferry\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The small ferry comes to a halt and the gangplank is lowered to the bank.  You could get off now, if you wanted\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The dragonboat ferry arrives with a muffled thud as its prow touches the bank\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The rotting dragonboat stops with a soft thud as its bow touches the dock\.$"
   omit_from_output="n"
   regexp="y"
   script="shipbell"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You briefly feel like you're standing in two places at once before .* and you vanish\.$"
   omit_from_output="n"
   regexp="y"
   script="passage"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You meditate on the glory of .* before vanishing\.$"
   omit_from_output="n"
   regexp="y"
   script="passage"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The opening to a corridor materialises nearby, and the Hand of Sandelfon drags you into it\.$"
   omit_from_output="n"
   regexp="y"
   script="passage"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It is a .* with .* and .*\.$"
   omit_from_output="n"
   regexp="y"
   script="weathereffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The turnwise sky starts to lighten as the sun peeks over the horizon\.$"
   omit_from_output="n"
   regexp="y"
   script="sunrise"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?The sun disappears from view below the widdershins horizon\.$"
   omit_from_output="n"
   regexp="y"
   script="sunset"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It has started (raining|sleeting)\.$"
   omit_from_output="n"
   regexp="y"
   script="raineffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It has started snowing\.$"
   omit_from_output="n"
   regexp="y"
   script="snoweffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It has stopped (raining|snowing|sleeting)\.$"
   omit_from_output="n"
   regexp="y"
   script="fineeffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It has stopped (raining|sleeting) and started snowing\.$"
   omit_from_output="n"
   regexp="y"
   script="snoweffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?It has stopped snowing and started (raining|sleeting)\.$"
   omit_from_output="n"
   regexp="y"
   script="raineffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You shiver\.$"
   omit_from_output="n"
   regexp="y"
   script="shivereffect"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   keep_evaluating="y"
   match="^(?:> )?You sweat\.$"
   omit_from_output="n"
   regexp="y"
   script="sweateffect"
   sequence="100"
  >
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="help soundtrack"
   enabled="y"
   ignore_case="y"
   omit_from_output="n"
   sequence="30"
   script="SoundtrackHelp"
  > 
  </alias>
  <alias
   match="soundtrack *"
   enabled="y"
   ignore_case="y"
   omit_from_output="n"
   sequence="30"
   script="Soundtrack"
  > 
  </alias>
  <alias
   match="upupdowndownleftrightleftrightba"
   enabled="y"
   ignore_case="y"
   omit_from_output="n"
   sequence="30"
   script="konamicode"
  > 
  </alias>
  <alias
   match="uuddltrtltrtba"
   enabled="y"
   ignore_case="y"
   omit_from_output="n"
   sequence="30"
   script="konamicode"
  > 
  </alias>
</aliases>

<!--  Script  -->


<script>
<![CDATA[
require "wait"

oldmapID = GetVariable("oldmapID")
SoundsFolder = GetPluginInfo(GetPluginID(), 20) .. ""
fighting = 0
CallQuow = ""
if GetVariable("CallQuow") ~= nil then
  CallQuow = GetVariable("CallQuow")
else
  CallQuow = 1
end
Vol = ""
if GetVariable("Vol") ~= nil then
  Vol = GetVariable("Vol")
else
  Vol = -15
end

-- Table for all the day time map music
soundstable = {
SoundsFolder .. "AM.wav",
SoundsFolder .. "AM Assassins.wav",
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Salt Shaker.wav", 
SoundsFolder .. "AM Docks.wav", 
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Isle of Gods.wav", 
SoundsFolder .. "Shades.wav", 
SoundsFolder .. "AM Priests.wav", 
SoundsFolder .. "AM Priests.wav", 
SoundsFolder .. "AM Thieves.wav",
SoundsFolder .. "WizardsAM.wav", 
SoundsFolder .. "AM Warriors.wav", 
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Magpyr.wav", 
SoundsFolder .. "Bois.wav", 
SoundsFolder .. "Bes Pelargic.wav", 
SoundsFolder .. "BP Interior.wav", 
SoundsFolder .. "BP Families.wav", 
SoundsFolder .. "WizardsBP.wav", 
SoundsFolder .. "BI.wav", 
SoundsFolder .. "Death's Domain.wav", 
SoundsFolder .. "Djelibeybi.wav", 
SoundsFolder .. "WizardsDJB.wav", 
SoundsFolder .. "Ephebe.wav", 
SoundsFolder .. "Ephebe docks.wav", 
SoundsFolder .. "Genua.wav", 
SoundsFolder .. "Genua sewers.wav", 
SoundsFolder .. "Grflx.wav", 
SoundsFolder .. "Hashishim.wav", 
SoundsFolder .. "Klatch.wav", 
SoundsFolder .. "Lancre.wav", 
SoundsFolder .. "Mano Rossa.wav", 
SoundsFolder .. "Monks Cool.wav", 
SoundsFolder .. "Djelibeybi.wav", 
SoundsFolder .. "Oasis.wav", 
SoundsFolder .. "StoVillages.wav", 
SoundsFolder .. "Ramtops.wav",
SoundsFolder .. "Sto Lat.wav", 
SoundsFolder .. "WizardsAM.wav", 
SoundsFolder .. "Cabbage Warehouse.wav", 
SoundsFolder .. "Library.wav", 
SoundsFolder .. "Sto Lat Sewers.wav", 
SoundsFolder .. "Sprites.wav", 
SoundsFolder .. "Sto plains.wav", 
SoundsFolder .. "Uberwald.wav", 
SoundsFolder .. "Library.wav", 
SoundsFolder .. "Ephebe.wav", 
SoundsFolder .. "Arena.wav", 
SoundsFolder .. "Arena.wav",
SoundsFolder .. "AM Post Office.wav", 
SoundsFolder .. "Ninja.wav", 
SoundsFolder .. "T-Shop.wav", 
SoundsFolder .. "Slippery Hollow.wav",
SoundsFolder .. "Flying.wav",
} 

-- Table for all the night time map music
soundstablenight = {
SoundsFolder .. "AMNight.wav",
SoundsFolder .. "AM Assassins.wav",
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Salt Shaker.wav", 
SoundsFolder .. "AM Docks.wav", 
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Isle of Gods.wav", 
SoundsFolder .. "Shades.wav", 
SoundsFolder .. "AM Priests.wav", 
SoundsFolder .. "AM Priests.wav", 
SoundsFolder .. "AM Thieves.wav", 
SoundsFolder .. "WizardsAM.wav", 
SoundsFolder .. "AM Warriors.wav", 
SoundsFolder .. "AM Interiors.wav", 
SoundsFolder .. "Magpyr.wav", 
SoundsFolder .. "LancreNight.wav", 
SoundsFolder .. "BPNight.wav", 
SoundsFolder .. "BP Interior.wav", 
SoundsFolder .. "BP Families.wav", 
SoundsFolder .. "WizardsBP.wav", 
SoundsFolder .. "BINight.wav", 
SoundsFolder .. "Death's Domain.wav", 
SoundsFolder .. "DJBNight.wav", 
SoundsFolder .. "WizardsDJB.wav", 
SoundsFolder .. "EphebeNight.wav", 
SoundsFolder .. "Ephebe docks.wav", 
SoundsFolder .. "GenuaNight.wav", 
SoundsFolder .. "Genua sewers.wav", 
SoundsFolder .. "Grflx.wav", 
SoundsFolder .. "Hashishim.wav", 
SoundsFolder .. "KlatchNight.wav", 
SoundsFolder .. "LancreNight.wav", 
SoundsFolder .. "Mano Rossa.wav", 
SoundsFolder .. "Monks Cool.wav", 
SoundsFolder .. "DJBNight.wav", 
SoundsFolder .. "OasisNight.wav", 
SoundsFolder .. "StoVillagesNight.wav", 
SoundsFolder .. "RamtopsNight.wav",
SoundsFolder .. "StoLatNight.wav", 
SoundsFolder .. "WizardsAM.wav", 
SoundsFolder .. "Cabbage Warehouse.wav", 
SoundsFolder .. "Library.wav", 
SoundsFolder .. "Sto Lat Sewers.wav", 
SoundsFolder .. "Sprites.wav", 
SoundsFolder .. "StoPlainsNight.wav", 
SoundsFolder .. "UberwaldNight.wav", 
SoundsFolder .. "Library.wav", 
SoundsFolder .. "EphebeNight.wav", 
SoundsFolder .. "Arena.wav", 
SoundsFolder .. "Arena.wav", 
SoundsFolder .. "AM Post Office.wav", 
SoundsFolder .. "Ninja.wav", 
SoundsFolder .. "T-Shop.wav", 
SoundsFolder .. "EscrowNight.wav",
SoundsFolder .. "Flying.wav",
} 

-- Table for all the indoor music
indoormusic = {
SoundsFolder .. "AMInside.wav",
"",
"", 
"", 
SoundsFolder .. "AMInside.wav", 
"", 
"", 
SoundsFolder .. "AMInside.wav", 
"", 
"", 
"", 
"", 
"", 
"", 
"", 
SoundsFolder .. "StoInside.wav", 
SoundsFolder .. "BPInside.wav", 
"", 
"", 
"", 
SoundsFolder .. "BIInside.wav", 
"", 
SoundsFolder .. "DJBInside.wav", 
"", 
SoundsFolder .. "EphebeInside.wav", 
"", 
SoundsFolder .. "GenuaInside.wav", 
"", 
"", 
"", 
SoundsFolder .. "DJBInside.wav", 
SoundsFolder .. "StoInside.wav", 
"", 
"", 
SoundsFolder .. "DJBInside.wav", 
SoundsFolder .. "DJBInside.wav", 
SoundsFolder .. "StoInside.wav", 
SoundsFolder .. "StoInside.wav", 
SoundsFolder .. "SLInside.wav", 
"", 
"", 
"", 
"", 
"", 
SoundsFolder .. "StoInside.wav", 
SoundsFolder .. "UberwaldInside.wav", 
"", 
SoundsFolder .. "EphebeInside.wav", 
"", 
"", 
"", 
"", 
"", 
SoundsFolder .. "UberwaldInside.wav",
"",
} 

-- Table for all the fighting music
fightingtable = {
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightUberwald.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightBP.wav",
SoundsFolder .. "FightBP.wav",
SoundsFolder .. "FightBP.wav",
SoundsFolder .. "FightBP.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightUberwald.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightGenua.wav",
SoundsFolder .. "FightGenua.wav",
SoundsFolder .. "FightSto.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightSto.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightSL.wav",
SoundsFolder .. "FightUberwald.wav",
SoundsFolder .. "FightSto.wav",
SoundsFolder .. "FightUberwald.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightKlatch.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightBP.wav",
SoundsFolder .. "FightAM.wav",
SoundsFolder .. "FightUberwald.wav",
SoundsFolder .. "FightUberwald.wav",
}

-- Table of room IDs in Gloomy
gloomy = {
"2b27454bb3147f1376cdf445d4f3427282755e57",
"dbadb821c49fc8c2fafd92ba3f921d5340655ee1",
"1a87ce973de012da5a73f71fb429db8f2e904c52",
"2eb8d4ee8277ef3495df5a3ab7e30186f640a991",
"ff12bc400df7cd0c37c159ac47ab5e6cc5c749c7",
"ac5d04f207a91a853b41abc5a6a420af9624d694",
"89faeb45c84132ede457701de0acc6451145d897",
"3ed7550b743dd561c0549127075cdc60557f110b",
"4cff8e6d78405d4771f7f19ee6b5f7c3d0f60e98",
"f88c6978f47e6a5c314191cfdd5828e7a5323b5c",
"2a533e2124a34e52e5c9660c4a0b89801cb65600",
"90d3a6c369a80ada84666eca9611ba0a6d8f5d4b",
"854ebe6f560b842079708b1bc1ec4d85b7cedbb0",
"747dfad532b7677a7c2ec2a199fe8d4b438f0672",
"e51f3b1bfccfa1b929929913f9b92ee8b7e71852",
"14dd2da77968d35c5eb9ee1679b20c24dc5b40f4",
"0ef6f9ef97e7c00291877bb6d93a247fbf544d41",
"a4592ce0ad51622f37451552b6c84e6b2580c5ea",
"7523a95db1b090e54a2b9a81d697a1d7316793c5",
"fba7b8fa2e4b7314fb37cce1405d2d9b4211e77d",
"1ca9b6f9724dad510e12cd0918996a03830c6516",
"5b49b042def8950b70f061b7832348248e2d0f6f",
"805c596b6b4278308b976b9d4222a98cabede1e1",
"199a47e8e6242e6f3c129a2154951c3106509aed",
"f5f451091a656d37b708287be54662f6bbda2c84",
"976232e6e094bcfe3b4395c71084e3331d6ee2df",
"5b8ae5f822ecb44cc99e9252437486b40f62bba7",
"e2f4786445180f1ccafea44008ff4e25ad38b411",
"474d111ca42b985a893c865766f0023467e62897",
"e4cf8738f6a4d8e5458a12491562466b304ba540",
"e1c72ee5b10964ff3bf5f8621af7a61f45a4d458",
"d4826c2065ed6f09552e5e289aab543d17f67154",
"1797706640a7cef1932bb3154b8b9b40fa0a07c0",
"6ecb3f6ce3763d87786616260b2c5fefbc20036e",
"a40aea5d1960232dd14b56a6197ff05f0af3c4df",
"e393793d139eee5074ed3fd64db60b963152f819",
"f9081174bfa0df6506a1aa77ae40fb44023b1dc3",
"47f3cdb5ced6a998d237a4bb35605c09ca012bfa",
"54bfd92d8ade74ab356cf179eafd771dbe43c301",
"e11af662c170bee1a1eb3d18acb13b2db4b5f25a",
"a81fe3cbfaad9eb501d88f17ffba79916cfcde59",
"d701867a60e32b7deb97efd89582333a9d287a65",
"ba3ddfaaae9753c9cc9735f69d97c0a78c1b8e65",
"8e103cbd4650d2af52defe666261ae4c7263b7e6",
}

-- Table of room IDs for Granny Weatherwax's cottage
grannys = {
"127dbf2a52c7750d83a82368f8a411ba82ec9f37",
"305d8f453cd6d986b5105d93b669e57b64e978b9",
"94c4b73eb23bbfa0fee40028a3439700d4a69fec",
"7b53edfbef4c811f4330d910ce60239d535c0389",
"7726be2d73af6d5561212491ddcba278063dc9f0",
"bc1c356d8f7cf97e5a645831deaa9d5fe1f816dc",
"dfc734e124a2ffe308066a874ca5ccd5e573984d",
"ddeff18d957d70fe1922c4e52c72d68772724170",
"d2f7d9b7a759d48d3fec9cd50f7c401902051e5e",
"c8b419ae549f27ad922f06ddd454bbc5272c9262",
"dd6ea42f55c3aa6c5feef300bcfc27634bda217a",
"467be546caef18cf6fede27d991ca39e70cd58a3",
"7eba64113adfd4d3537cac24575203a3eddd0d3c",
"5760a51c9f5baf2f08818722fa9889147a3423b2",
"91ac6ee1074541f9f7b1ee11e2c958db8162a16f",
"1a3bd683233ee8f85b6c3930847d7aefca630861",
"4ec6e5d2c16eaa6cd6ac650de67691283e6ea4b0",
}

-- Table of room IDs for the Jobs Market
jobs = {
"12f9ae4a0a2792bd1193281d0cdb5bc67bfdd9d3",
"6be2a2f4c4d9e01fcdf38498a32a92ea5f33fa51",
"c86e7e36f138ae6cfe05c6f62aba2b4c88deb596",
"a5846b0acd26afec87c2dc20daa7ccadecc94cff",
"f32f1edac88adfd1a0ff65c4a4450d8b82849f44",
"73b97bddee091fd07ae5b14cccdb187b4ca11925",
}

-- Table of room IDs for OC
oc = {
"979c6f3e2d257030e105bd2c62e5021aadf872ab",
"2c94bce76b1ead9f14b4cefd5a6a10ad80dca469",
"938e502530a5bd587a4fd9ced16a709f2fdeaf51",
"75fb49416265e5ad2e6b672ad1f44474be195c03",
"e819e77f376905afdf4e8adfe7838930003d1b7d",
"f849252950868e562a325c27024a6d4c915bc65a",
"0caaf5a8bfe27a4dfc7b1a1e1167ae3afbe088db",
"8ed2099010de40e0e62fb4e5a68156d2a2cca374",
"5aff9239401415934b9ed0571f329499143879dc",
"3458262cf21b395d06caeaf609ff9a6a6581dca1",
"96a5e24cc2ba817756f5be38f51630fc51a4f41a",
"35212b8f95110f3f31f1df2866d9dddbba7e2520",
"28a6cac4941a5c2035d9a5394d9b84b38731f2ec",
"7a695dd28f7999e1cff636a88b53c2e0ac7df674",
"ca8f4fda995fe3b77932b70347b303a69faa515c",
"c41829681ebc066ff05be955f5c1a208dfbed2b9",
"8585d8333798004df6da703aeaf782fc4da33002",
"b5bfe2a0c1798beff8fd02776ced060e025c4b07",
"8bdcfba9a05db43dd65ac8d53718e2377a9d5589",
"258cb6643a208fa4576b69fcf473fc19037c34ed",
"a9babfc404a8e24cb4985fead06cdaad9c29075b",
"f91b7a32dbc1cd376fd8614ff36e457d007ff5f9",
"32cca491f976a02368c25f3186ffefca260d7a4a",
"a0c7dca981f3db1d5ba2d2a6c175ab5c93eafb36",
"d5a6dd2a0d79f4eb36824cb714732f01efe6e65a",
"9a20550ef9ee370056ddc732eb56f1aee1aafec2",
"76d7a561e1359e5737c1a024affa9250bf943e7e",
"e2ce58c916ede6a3b69ead302d5e1653cafabcb8",
"97d4fb51e35fdc2e4139b1e5b0a52da656654512",
"e45af8f68fe647c9d696743bca8abf37067145e5",
"06a74b9e9daedbee443cd0da745ef29190d48826",
"93bf68291d0dbc25680ffb5f42e35e6516b264eb",
"0b56f177149d61c5ec8c2c1dbc1969ad0ae2e322",
"922386d22dc8eee0b5b8679f7e1fb5f2685311c0",
"d5213b9bda718a0a842e54b257ade4458649b063",
"adcda0c3bcfb30fb58e3e2e99ddd0469ca8ff92f",
"38a77973d226b131b692893c2fb17cbf55f8d274",
"62e7d76a308e4d58ea34e85476a8233c7e29f788",
"363e75574321c41c9847259d9424bacb8a1e43b1",
"5a2c5fcddaa89db63110a5fec7c344a7b63a4347",
"5093f2e2f5d2625b16ed0ad7d540c21b7a69fa1c",
"d50bcc9011b5da667c3fcb17d1bd70c579e7ce6e",
"d623942da87b7854392b2a297eacc1092a2f313a",
"98ae56ea0cb61926a06cca058ea737f252226873",
"eaaa8c81e7bd65a936221d4cc19198a3e91fe5ae",
"8a85605e6a2ca8664a6fd69c4a8f7015c0c1f71f",
"ea41e5ec8521c99898add8209711338a018339a0",
"e22decf00b4ee5c32c1c9a73f1c39d1210d38e7a",
"b9ee95b5277370fd31ec8599a5e6d16b255de89c",
"524911be604370e1bf6b2cf6ac108f59aad064cf",
"30c60cc71064bb0f1934ead58f7c40843de7502b",
"f8b863e8ac7d97a3470e63797b4674b4812127b1",
"945c7aee82f1b69f69bd88ff4316178dc77058a3",
"0047b55ba277b009c1b9fb7781ce504c1fd1b633",
"7ebcc767435ee9e6dde2c3226b1aaf1b7d3afb17",
"08cb05d930e150bfa9cfc5111f120e377232c935",
"45ad0f5114afe3aed0646bf39cdf5f66da4f6a99",
"7c7bdee9b0ad22329c03cdb72b762b1ee4cb792f",
"85a7de814a4c4519bbd639971cdfda720ffe1064",
"a8c12e801cdb589a171a7e3e1d1a8a02131999a6",
}

-- Table of room IDs for Holywood
holywood = {
"e6ece73820d4c5c95bd0d56a5171693c76dfb177",
"a58e3224c57f514b5b2445573078f7964559eff7",
"5659d881ea9762ff1f98e5462047a990f1ec7961",
"8f261d705bc59389ced8ea150879c3c00ba9baa6",
"8ee6f05a721d93d15599518c1706a3c79880498b",
"2cda85780d464235cd8d1fa81398b045f92c17c6",
"e4102e9f23f4b4de3ae1d0a592131df8ff8baad6",
"d4533b88ff75986296dae71da146f21cd14a086a",
"0ed2b2d0a34f7f9cc773ea361eedcccf04c3a555",
"8dbcbe2bfcfeff3bf2f77d74bce427dd8e8ee34d",
"4831372cb99bb02f7db1e6006dea06c41f853b73",
"9fb1146e2e6ed0620d7798364b8b4f0825512740",
"401ad7c300500259982b752b0d41879075e5c968",
"3ed753cc597af8db15274d09e963464353041925",
"6fedacadb8df5d267d5dd190826e28f17b627c10",
"845f60511eb334f11f4bed5a0888ff0cab609891",
"4bc88d12c0917d4380ee024b526595b832df490a",
"7d1970f407ba4acdbc223c52f25c91e00485786b",
"8983736e0f6089df3b299c29c7b11d20393ff98c",
"808fb4b6831e269499ef51c2f7ff3c4225d5b22e",
"14905999e4eec3882ff2a541aa9a8d91dc828d6c",
"18bf681bc8db261340b3002e8e217634095cdc6f",
"62b85ac43ea573b123c2469e738266e7c8b45a46",
"f4452554a7eae7535038a007210ba028d09b3ed6",
"5d884fa6cf0bb55d5449fd7642944dbd3095ad35",
"1b8531419be003123eed7b3c70a836ea86cc271f",
"cfdfe78fae0365d5a15befd3d44102f5f125547b",
"ba757ceb56ef4945ea39a67449c5c7ec20304e1b",
"edc6502b3892901e6c7cc81ec37344f332b7533b",
"33b616c51a060e65b4700638ec03ba0128993675",
"a3213fbc2176ee0ae9cd14c2dcc716c208cccf70",
"ece04af7e166b9b895795d6bf91489fe6d47877f",
"5c69e062b21d31b3aeb965fcd45f0d934a7327d2",
"7e7ca4cebf6cb9672dbbf59beed9a6cff78034d0",
"167f5d02c2e44bfc35b0e94e593706ec9c7dedb5",
"d0bcfa441920dec8a162d80a6695ac0c72062a90",
"1cb18f4b7accae7a6b70c1df58241f85ef8cd2ca",
"dfe1b238a6e067a59e5512f5d7a9a7425f149784",
}

-- Table of room IDs for the Villages in the Sto Plains
stovillages = {
"9382d837107c22b1ec49a416e7be46fb0d0fe14e",
"f3fa450a52e8c8dffe68eb6b2a33b66ed187b401",
"3dd88742b5ef1161edaffdec3bfa43dcebc820ad",
"32ba6dfe2409fc62b80de40a140827b33e94a6e1",
"66e221d87b9efaf4c2a4ad8071131d58466e04fb",
"98b9ea71d214811a9352488609265726c2943573",
"9ec30ea445769647a6f20d14144f36b7e8b1dd52",
"321e215f1dc1ec33b3be86ee2edc861e2d709469",
"fe0c127eea055e28e673c42df313751456a34b33",
"3e3ffe4691865f6d95a26e0e36149d70cf175134",
"14d54eb984c83c2b5205b52d6be08d4da193f4a2",
"734f05d26281c730bddc6431ffeb1fbc60d80772",
"72e9e5a6e2816e5f96563c934c431eb7a8132535",
"e49857d81283bbfd5b3bc41b64befe99a0819746",
"c1e4852958e0285244888c0fdf839541715b03c1",
"f3d622f4fed3b92ccd3f32dab50b648e0dc75fde",
"ce8cf80dc09119c141cf2a68c49cacfb82be682e",
"925bf4dc2db61c38628c39078019b807711853a5",
"1a077314abb0ddef33899f6926ec9f08bd593c9c",
"c38dde72d751f37884716daffd9b9e778713867e",
"289b85e8ffe02ddc58ed6eba9c666e9d4f44d87a",
"748780e620e4848e6906013c967cce0e461d20ca",
"a448b4526c45cb88fbf913fdf982ac4fd4e3129c",
"bfa5eb679b914168217439f0b10e019027ab203b",
"049cc0482541d5856ed66287d3848af8b89e4455",
"830e46053dd6fa9b0cd2f7de341a13e8ff71840f",
"a1bca4b3177d32e900e5b345ec8379b6809ac72b",
"b5bfcf20a84568d2bba3b89746566839688267ad",
"6507872cfa4f9dae425bfd17d8aa76ae94ebd69b",
"3e89b998c09956d9c087d7cb4ad2bca79f2edec1",
"c90f1566acb82ee9aa375cdc72743acdce63f82c",
"64fe3a5d74dd363b2d563941c2c9af5106ae161a",
"50c76cba495f9861ab1f2b750962d138d142918f",
"676f25f961e41887bda1942798d837b7ad333a1d",
"f0b372b42c12556474842ee54ac03ef7febc62d9",
"3df385cee4667a4e7c627c9a34fc7e788c15f889",
"167cb7b34fa5ff77d58067a57e62c05bb2effc26",
"754dc29f7daf1357abb47de05c0f7756f3dbf6bb",
"4aa0c080213c8ef8b0c36129dc37d7f81ee3eed5",
"4e0b0f9602e39fd9a554f571bd88fe7b25a3024f",
"b11187c9caa8038a17e210afc156304db96f3e66",
"caa888f66bdd408155ea02dd2a6e40ed25fda324",
"c63809a25297ec1d004ae7007ece8a62a5fa7b14",
"4db36632764d884e393fab59927ad9dff81ccc9f",
"1d4587a3a8be87fbe10d752da2cdab9edc00eef2",
"1f2c4da6a08c546b0b51a51f2e46d195b40ac1f0",
"a2e4ebdc9d42380c35ac995f6db17cdb77557605",
"f264750205945fd2fa2d5c8e21f445820dd88425",
"f5746d65aefa3531545fce6c0b63a68e333f6378",
"d321bb09858d208a6668676df954b3e32496bb13",
"2c4fcbd00af03ec3bfb22b3ef1446d08a6f41ed3",
"1d96c19981e65e21d25748518ed93b5692252959",
"61df063373450d7ce0824ec5b508e6201715ea5e",
"503ee6fd1f05357d3c35c123957c50e4b10166b6",
"57bc735050509a282f39b31bbb5061b943278f31",
"085da43f7708d8c5f853ca2c2f70b0d2ffdf02a2",
"fca1204085993fc0197152f6f8bf28d83c624e23",
"ac2cc7455676cb2a6c8fd562b7d82dcc68e1ae7c",
"93416b8fb15a208c91af5065c1c452b71a35c4fb",
"413d04ca8ca00d499a5376878bc8e72177753b72",
"fe155f46ac2c7d521ae8c1569768f7c4cd7909bf",
"5475b43c0e0e0d38fc27330b42f5b54fcec62e13",
"6772e421cb11396ac2351b1eb624d276421a4899",
"4d59515991003e2678573508103856f0d62c65ae",
"dd61c2d636ad59a6079ff67900bc4c2f82f5bac8",
"e539de99fe5d0aa4a7f14ba4b7faed6134e5d6e3",
"547739d494f769f669f12e1eec482db5f970f391",
"062cc94b036b942caed0aaecfa49b589ef831da3",
"51ca304a63188a29e738aba64279e1e41e4be5aa",
"2bc08d95a62b923ffc36f3c83d549867691f72be",
"afa9c1df76dd16d8247de5371a0968393e829919",
"e92d72aa0d8584d4e972f48985ec7f5efee20ca0",
"899f1b179558ebbbf3db424291e062fce6e193e2",
"b86f244da6a2453099d5abef1106dbf52541733f",
"b58240fee4ce6ab346ff19483c119b6183eda778",
"7cdff063a132319a743af7d7d4c38c51ddb6e2d2",
"c1c8a21cff5d9c0fbe41d80e86ce5e90cc483b3a",
"c608ef19fca1255ef344fcd4712a451cf4e263e6",
"38ca4b3d6462e800cc3c137bcd729440736a1ad2",
"2f55519e3568386543242dc2b7eb133628b5dba2",
"3be7ed309a5791f7478b16363443cdd09cceaac5",
"61fdd4a7973b6e8904a43d8b0065ba374156a194",
"d51ba6c25fb09f6a0da0983f747b34ce2e707856",
"b56b0a4c31357db57a69ac82e6b166c29fdaaafc",
"436bf99a1dc60f738b8513c467bc4eb88db242f2",
"971ad0f70b27c93b061a90b7e121441fc090fda0",
"ef8dea6037376b168f48c9b68d436be95bb342b1",
"21340ab68e3ac2567030d715119ee9f12ffdffd3",
"573a6b852419167e07b60296ecdf1446c09d3e98",
"166ed89bd63ae98a718c327064170459e9f7192b",
"6623e9386ae17bf9054d4b9387c6696aff416009",
"3e8df84018719b734c59d5e7e14793f9b5040c70",
"3887791d1b403771b941cb954a6a89b50ebafd17",
"898c76650c599af6c9fe6d26d6614789d532d33a",
"c3ef5cc138ea9dfcae7942a671067d45419f6afd",
"1fb91c69aa7a1455b3f969345ed208ccde5eb2ca",
"08cf386b43ab319d3c366a371f243bbcc688feed",
"1a002d22b72b99db6cb99ed91450fa5726f14785",
"9dfd44df4a880d3e75ef338aca18d89676ed397f",
"e957156f0f75d89cf263b661f630435099b44b66",
"40b465fd3870569000db79d8113bcb174e83b4ad",
"b78d7ec4d823b9c8ec4236872d93d7ecbc569d13",
"9e76fa50d8361a8244ae82537f905fee798d59e6",
"8b0a8b63ae3f68700365d43364773aec97d73409",
"0b20fc8fc4a8d74f3d126442c7cc9137c7f4b99d",
"9e4c110eb3b7bbe3340970fc7a4fd70fcaa57bff",
"76faa6e06e11a410b92796b486b89fd226ea5e3c",
"914a9ee788ddb328e63e261aa9715c30d3aad1c0",
"5dd6d00437e8679e2069ab577c9ae8cd65158aab",
"36c21dc9a1a9470453c411ece42e147854f3c61d",
"02e09d867f05b5126f88e4b507ef9123ab673afa",
"bcd50cde5a44e52149f00bb181c590736a9a73ed",
"a299dd1bca63b73e3b4eb870328cae3d1749697a",
"8af5d75af64282d864fed4feeca68f9220af283c",
"a1215b56cd013ae9a9a4e8c72af0ae14329bc617",
"e3345575107b5b48193959b539b6924e9e3ff278",
"04b2801dd842933e1de5c74405d86987278bdec2",
"8e4027bf2bd7d53af809db21b19902d7154fc546",
"28fdcc70c966db28d7060d12a733c381f9bb4b9f",
"fbb8d9086a755ae9b7a679c94232a8a731fbb42c",
"61850a9a9f03ba315d00f3a238e9171ede298250",
"8776d0332c7a88f3ab567d368a4ab6f54633b391",
"59c53644fc3c755993309f3e82ade4229acac676",
"4c947c7174359be06aaf8c88ea1dee5133c04b50",
"7bd9fee57e035291b74ab8a861af6808a0a515c2",
"54d62b8d4b03b57e462f5cc4c6379a2cfa9f0352",
"42fa0d90a568cb02e50d8071362915f9ce1089ee",
"74a7f2e2161296564489eaebd1951bef24c37ba2",
"e223414913c10b83187d3873a6d678dff8759a73",
"1bcb12d5d5d5b2005a58d1578d3af17e68ccd006",
"46bb4e74e727207b503e5e80d48ceef41a16a35c",
"38b756a5098eafe133788d87775e81fedc76a34c",
"2bbddbca7a117b10683ce8650c78066a4447cd05",
"3be8ba0fbfbe0fcc49317e16cddad596cdfeb0f8",
}

-- Table of room IDs for the Villages in the Ramtops
ramtopsvillages = {
"7288a6b3d97288f4c8bd5fcb876225e8504a55a2",
"62285b2daa47192326051e57411840285a8a1f38",
"13fd25e68ca1f31586f123c6f2a42086dc0679b6",
"cf91747aa2c0076297acb752adf071e332cd7b0a",
"39a1de3ebe8af23f05b8acb52741908f8d48c718",
"39d49302077c78b280ec4c3c276abcc02fd6c77b",
"0bb508b508c2d38a8e9893cb6dd9c28cdb9c1d4a",
"b7a8eae5cda34e7f3f4146fddad0918ba4d60642",
"568e7577c38ce1e34fb810c6e3e138d539985069",
"0cf2f1c56d6ab9696cfe5886f553e88d6f5d07a5",
"76a4ad9c3dcefa10ec31120070bd1544b17675f0",
"602fb8f0b0fc8c23a1394131e85e1ba374f33cc7",
"8edb76883a99881318e18f3a644baf1bf7acdcf5",
"dcc85c2c5c63aec621360449f467fa1aa2770c3b",
"1cb5f4456228e2b9e1fa19aac08d3f4b5a76d838",
"0995f2064def25f6b4a51e68c23f7feb2432bb0b",
"001c743ddbab94ee808986837768952836d00727",
"3087db431b55ae74407072154a18de2fc77c71f9",
"d056b35af0117ef5ac1bb879c9d4d4339cd5abf6",
"54fd975ea07b05acb7ada5428c2222c86cbafbfe",
"9135d67b1fabc0319843623ed7350888f86ed464",
"4cce489a02d85424a3715f941509d5ba820fde30",
"ef32c1d3f9618185d3b304a7587a828003d0c3ed",
"0579152f6310107f4f5a71585b6940af38f0b40d",
"e40ad35c1408ff6c31cae8fe6c9f617ec1dc0c76",
"9aa990c082d5caa58382240444fab1120b276894",
"6b75a8999d8d95b1fc8fdc7c9112e1b6fedefcca",
"971cb21988aa8aca86c71aa610ed281f61cdc80a",
"5b79566e52a79e0d02e270930e6ac2e1ef2d30de",
"a53d743f294ae89d3ea6f9341692e0181c7bdf49",
"8f41eddf8dcdb98f60425aa1eeca7f0c6842173c",
"d41d273bd18ae752dc193762a73f9840ad4b1c62",
"3f4068c1fe9b5cbf63e6a2557d30d47639f2c2e8",
"16e4fac4b358d9cb92dac93012718cb7a0f4e309",
"5c10363fca6ecd8b6fd7bef8d255916cd4b3c0b2",
"71dd2139b11c7402af612422c7432af63b0e3b16",
"a84b990a48660fb9d4b0fe93733ae7db7ed38586",
"c58c30878230faa3d46959f5812ce847070c3f96",
"d9e25245362a974822c1426806651edf5b6c203d",
"c90a791153b729cc33efdcc445aa2ef357f6afc7",
"1dcb49d07ea3bd1fb9d0458f297d30a851379ebb",
"79f792ef68687d6ce27b90d9c6df13769083db26",
"255e91a3604c4b8bd842d8d5f047c70249c2d8db",
"a87d2eca20a225c2767c2ae2e04811138409cba3",
"934df9b3f59d942b2071199c90748be47a0eb545",
"2c868e978538552ed2765f1493b7fb67760dd074",
"b441c59d8e1001faf328f16d604573be6364eb01",
"d53e97698a5300875bdcf97931ea58c18d093b06",
"317426d7ca61524ffc8f4718e3dcc3fd48fef38f",
"9d4c20b3a155520011bf4edbf66866811e8aa32b",
"031a1b3c6115cf3eee08fff05aa08765abcbbc52",
"914c9f0f17fde4262ea7eebc2ecbb07812bc4583",
"7bbe16db559ffa5d66a9201adbcb2db68e8b8bd8",
"a1eada4eabb61071b32d9c54457c7f2c7ccb102b",
"45bf4a3257ea4bc0c0d5db2fe0cc7067f6a6d380",
"f3e375d87d19d3db00c04a47b8ec57fd53c1579d",
"6281192e87c033df29ff08bd9f0e2ec873331928",
"3b25079e75316ec517349ada8a58fa1a94019cfa",
"3941da8fc8c0e5848409aa0e9c944e6db931e6c5",
"0a362976a4a1998a8f5e816729ea022418aef971",
"b59cfdeb610f5951eea6310ce74a8b738fe81dfc",
"1317893fde2609b39427af37f579c53f6ed26d21",
"1212b8ffdc79082c01580ff424356b7d032c31b5",
"23ac03c11ed992a55723d8d77c68a3316c75414a",
"6c735b67b8cc46f01f502fc7f00c12bd29cbc4f1",
"32101839a2fe06a3e807cb3d7b4ce11d356d761f",
"5afe026fff3261d8b88de4e57ef0f0d837f0d8ab",
"f2ae3971db0ed5eb3c7cc125872c1dd21cb23ce9",
"9522dd8ef34da0c0c05f2ecf19ad53648051f9a0",
"39cfc6e7a2e5728373d9acaa48dc06f473b9ea07",
"a0eeb00337e6263191e223f00d679b9ba4787640",
"34c42df618919b4305abad2ecbdf8237936dda0d",
"f3cc2fc6e94ef3a5e802858a4cbb09c686ceed86",
"eb5de57e4ca48dfd9324bd3c9cd66f5c0e1aeddf",
"2763b1a29537a2b521599097b2a9548e3e86968b",
"4f3b89071233099eaaef7b22ddbd7b5aa77e11aa",
"023960a71535a67323ab21c9bcba6fdaf3a8597c",
"2358f8d38ad97a233336b49b405c638535b84337",
"90614004c9103067d55cae850f54f6815b407fdc",
"76c50026ba19fe98221613fffd458f25af5da850",
"5e99887ccfa1b349bcba96242da290b165284726",
"3fff313ec60f77e90f5d3934ba5f3277cd77f9ac",
"6eca84a6a6e7bb720be86e05aa32a3e513a84cf7",
"33946a7e46b9670ab4d449fd719b5575faeca042",
"48a17d4374c3457f5725ef9d239822f935b9456e",
"e30250004fffaa0a584d62b31286ecfb574db248",
"c01b47c4b8f152ddcf4dabd7fe9554ffc98ac465",
"7db42a45e86bf470d53d19efc407c12754f2e66f",
"fe057be7892eb217fadea26e38382ca463130124",
"3e75f419d285c2eb07951b613f566cba65e60e0c",
"302aeb679c68fa1b8d4e3cade6590dcbf569bd95",
"c9e66e56d34f855cc3ad0fb410538e38255bf26c",
"ee70972c26bf0fb32c7057ff89c03f2e027cbe00",
"2599f3554bbb1c8bdc6d84f04c3778aca458d856",
"6c8d4449dea568e4ecc2b49c7153f16cf3ada8c6",
"59c326928cf0770e3bdfb2dcc857fddaa66b8c24",
"228894cfd29c772a8c6e9f27d38c5c30bc4e6e43",
"e755a33b0575d5d9ae10b7247399d963f1ce1b5f",
"6ef1fc26cedacd2ab099c282942533a74b98c086",
"fdbbda150f3b91e1924ebf66d5ce903c34b19221",
"7e042cb6cc905d3638e0049ce52d9a63a2e63bc4",
"49933bb109f1df33113a08eff2c68e56034067e8",
"3a415e1abc82a37d1bffb3cac67ac9c9001210a1",
"af66a0c91146df35cdd7169960a68e6c1b35e39d",
"f55c5fc232e0df1c25da37ae940d0e6cad017baa",
"dedc32a8c9754721efcb2b25aed9176fdf2fd255",
"5decaa862a63c90b70cc5d9717bf8dd9e8a8c629",
"d0df8dc4d3e6acf36628142c52dede33b1f19ded",
"e79144da598b79b28c768bca51372f5524b71795",
"361e6d350bc31b21e7bd401c5d60b41bd59f86ce",
"19ca52fc12a0d5a15cb0891286c453d32fe75b0f",
"b6b9e2ad1612973b4ed9405812f0e193d42d9d8a",
"6807ec4154dd0f93c7ffd8a8a3211f9229032953",
"6c5be0a1555be9cd2ad8736c18fdb42438d3d82d",
"98abb82010ec2737bcb6c560532cb20c8aca6398",
"e0fa8fb366956702975bae38019d83875d8e4688",
"88bfd0a0660cec86fd1608020b0bdba719661e3c",
"da8407482bd80211764369c765a846fa9f1c5b59",
"35fae672cc4b81274de58c15c84b9e5035fd5e27",
"0ae2d8476dcfec69df2b8a180a3eac1cfa3b6383",
"36e23a9697d5123e220744d9fc82ed544d765078",
"4e06f850a346bcd7c6117de8426f7968a435870a",
"92534f8485226a317a112612667f1e02ad561f74",
"a4f29438c06a4db459fe727ef77c2aac231b0bf5",
"1e4d603476a47f4497fdf49b09f4e0fc59c48ace",
"d34ce7b543176f0f300b35aa055c40df1c6633c5",
"9b1dc00ff39dfd03c329f8f0b8b307eb883a03f4",
"69c0fe018d850d1f362a14d3f247cf1bce781dba",
"29cb3cf6e2e9f48894ddf19a5c3151b90163f2e5",
"902bbac7cb50176499842c574d95611409bd6060",
"daff296b2fc6d2523f40b2682d9e8c1b60a0e688",
"a553805f1a1f7c9f4e255ed4e3ddc62573c66552",
"8b8094836550aa9bae846bce6a56daad1f00a61c",
"c1ae5a1a9fb23d1809850ee45100d35bc2fcf432",
"1a146e63d6e3a52afca87b52f074688342a5f974",
"eb48f1ca1e724d0ac2e768d1063cf7fdec208697",
"e87f47c5a8007d63288e8f238f83493636be1d29",
"0ff6bd0883a3442d65ce6b4fe7dd60a10ff7e7bf",
"aac510c50d9adb661bdd14c9252405238ceca529",
"6e76b80bdc98c87149d58d2ebf9b9a6bf36af263",
"d513eaf21ee60ecd5191627e1f45889e1769cead",
"b578d4e662b2b34052e5790d76a599a047084261",
"f2ca019bfc44381039fe2ffc79445dc96b14f1ab",
"4de494d692d5ad7bbe8b3b938e3d78ea88b7f94d",
"f42bf8c0a8ad1a61fea9af5d93f6c030039b0e71",
"da4e0a6b95e82d3373922858847b3ab2042e9fd1",
"d42bdf8bf3ecfd590d3b5683b72acfac609027d3",
"8be4fd0085a3d0de1cc574adb39dc1646f24f3b8",
"30f25f86bdadf26bace7a5cd3ccafc72e9bd4c3c",
"2609fbebd14a410d9da3d9072d26123804c11fc3",
"bfe0a0e71849d71a8a1061e7e6f209ef2bb58a96",
"f64bf297e01a1512f20905a49c544d623fa424ea",
"1a14f42a2bf680e5e27a984239860bdf521ebe1b",
"d1b409b529ab77d4cf2af506e07faae6a7d7d2e4",
"fd810b390b555751250f760d158e8bd37be24555",
"1cfc6d6cd50e4a1bec614e4ced48222e0c764b21",
"b9d319eea08c481089011e20b7c71619cd828e99",
"0059a92475b08c1cdc724917a60e13813d64af89",
"c4bfb183d7c36ef0440f434d744b8cd7121c6d9c",
"f1ea88d3d12284655dcc45b13a4cee8977b2592d",
"6b27bb47887991b768f45f856d1a9915f9171eb4",
"24bbc6089b306fdb20deb87a584c83711d18d459",
"7c201d6f0b05434d19e127e259e5c3a4475dfadc",
"c634169e574216ae2a12b299c6aaf6899b653532",
"8ff69ea1f3b252f89d2c18ddbc5a708290534149",
"0a2df4a39b3d282714175f68ea5a8e946edaac4f",
"6fbb4a53491fe3ee652b0babe7181ebf3b8dd4a1",
}

-- Table of room IDs for Blackglass
blackglass = {
"a5c2939edb3e2a4887205ce76a85640dbc997b45",
"07bfcdd69cb0a2eb9651bc155c2f5e0871f498ee",
"bc6613945c42c56a93fb408262a99efb13899333",
"0316cb0b6654fd40ed69faccd1d2b6d54b6eed14",
"483409f464b2904cf30e6d5276ca02a7aaafe7bd",
"2a0f9dda3dbf769119d1692e9bc529adcc4725c4",
"dc96b9863b701fb1398507a7f974b1e3a76d9ea0",
"7ed006570f5c515b24ce2fe8146e373b25224509",
"5ab114d1a1728362f471b5f856a7b7d5ab39e540",
"df292ce4c21a9c684ab86625d8a83528494a9834",
"47740455d6dbd943a194543d9e37d7fef24307eb",
"f639db769302cc0e1f39fcaf3f1a51931b90421d",
"48a87d4ba19fa3c3eff3e05cf5d0abfe07858723",
"ac968a76e10ecf80a948464e79661256af78bc7d",
"2c768967c52099c940719ca7c711a20b9261a73c",
"6110d70f933013682a23c65b294cb2fed25fea28",
"3cdccea2ec4600379ac1c2d3be0dd9e6e1353594",
"a5a51d3a72ff1768a98d10dfea6da68f0fc70eaf",
"6b473c0934dc119008c3583775b98aeceabb97d5",
"0151435257ad209e64a7b496d61431d7ecf24864",
"d45d3fbd4fcc3daa83683125a05ee72ef6167094",
"a597b6a3a9d2c7be2c26c911373fe8027f397b0c",
"37376ad947336898b111bb74324a661cd83c4274",
"a8519a9538fd4ea9280ce2ad17eb84c51df25137",
"638022c6fd39219cfeab2b05dba67118df9a8adf",
"2d238a94737c8e216d4e716fff9b693fa3c26e30",
"63d06172f512c94bcc0e73a80347206db1ecf9d0",
"2509fce7b7a5e1a2f76f56209da0cb8a2cb00f6f",
"da1dece57820733e61d7460957ff0a7d33adcb27",
"c975c4d760bb02c0e0eba042cf442e4a87b664a0",
"4ba3eb14a23c621ae22ee41a2989d3c111fbb1b7",
"30318475821ff1bce2f1801acb3f9bff4f1b28bc",
"2eb078f19e2b2001be6035e5926b2526b5cf8f79",
"087e9ce0a29cb5e1885352a7965d744bf398dfaf",
}

-- Table of room IDs for Escrow
escrow = {
"0709e73eac0039c40687beac25df1d877b1d7bd1",
"8a68ac29f1b45caac92c06a931a3b95844ea2147",
"bdd4b2176e556615fa2304c09ef89e10f3aac401",
"2c6f79c386bf445f4b7c4712659621b9333bf8da",
"fb50c6b9f8c9cc5b98f1236e93403a2bdd8b6a50",
"f9eee7488c4740d4a9f040a377696b01a181ed79",
"fc80b52e01ddf3d75071065e7bbab29879108569",
"6380093b03920e56966cf60aa7ee345c815f4854",
"5d4a5650f25d491daa635b83ebef2cb328539097",
"bfb89353969c420841381ee50b3ecfb7ced5f2d3",
"74c6935dbca82395c0fff6b9804058eab0b6f21a",
"7cb1e5b00c21dead09d8bc2c275a6b81a191827a",
"8975116434dfe08f1f78b94999b0e14a89108482",
"194bf50b25c4ef6816163589c5a3e47f77413b75",
"aced8c3a59bfc18a161fda414c736344e8c82a63",
"3dda34e357b06ce1d74cfaf5f6f9cb56e1ac41fc",
"364a4b871a7922afbd4703c98e1af477dc9b676d",
"314db73ae1445a022c7c8c013d01f5e08de819d5",
"9eaf43ac5dc444d92fb7307371a33ef260b19318",
"eca3f901aadd8fa0fe73f8bcea93c0f8f88efd70",
"557b72f65f6b7ae39f36e3e1f0119457a73e3d34",
"92711a44d40f0ed2fc6691569ef04f4d6df17c18",
"3cf7feaf2a7ec911151186c69dd9a53493955246",
"0d96663f3ff503ca797b35af737e5cdff6455d92",
"590a95fbde4e333af9c2e3337bfd7870c21932fd",
"4bbf535dc4c89fc66025bab8f21fa91dc9304b50",
"281e7a28003f59cea7b20c786a1c7e594ac2ceca",
"5cdeff771a086d4fa594ad40a6c3a7ac106a369d",
"d2e003eb9ec11df95e182c36fc0b379db8edc10f",
"ab9ffac2e382e47e50486a08468f83de559fe565",
"da46b3ee55ca3dc4dea984edc8443fbd6c223076",
"b6d45f99e4cd89b3561a4a7c728440f82e2a21dc",
"6f34245e446ea8f813bae8f606c1af26d34bfe24",
"dd6c4159d51a6d1415e57d6b01a58eaba7b643ea",
"20aecb3c7aa7f3c9710161e05e505806c979aab9",
"f5f35d975bc96b82c39595c1f9f4d6bd8c991c30",
"ec11e95547e12a82cec421b9fe0afd3eaba6e485",
"c969611c9a2f5d0c63400c9d41e44be3a5168fe4",
"cae0f63742654a8f279282e28ce24f2c80cde7a7",
"63c00fffc406e7282ce8ed859e24afdaa6545c9c",
"a5b0d4bc119797f2473b4a6b421d0aa0bfc9425b",
"e01a65225e2a4290256e4bf2d9a1d29a4ef866f3",
"83e26ef261d080ac1b6c6b877a714592a311b464",
"79ae79c587f6090ef9d7d38af5bdc530f7d18d86",
"bf56eef5250e8cde96ba841a7bc43fd1fa0b76a7",
"b10276a4f559109a98e2fb675ead0164aa42e69c",
"db045131db33b92e480f945be94959c8ceb453a7",
"e7e369f39240d93e95c8a5f925b409b6bdd760d3",
"b878acd49297d2508ce0327af992b9962d83135e",
"3be2e5b05c55725e34c052b45583fc270ff9495f",
"62a0145a793dfb0ffdcc827d02990bc40887614e",
"2b6c63cb5baf89784bea0e50ac8f3dae86c562d0",
"f755c7e86e9662b093396e28fc1276fb795c8746",
"266ec42520eefa61cc439b29544b5a6f89917390",
}

-- Table of room IDs for DJB Harbour
djbharbour = {
"6d1c0b84aad8e091e7430dd9fab9d59c0747562f",
"fc66795bb2dd8a20d50e150d25d09c518c4df8b1",
"6c86770744d3398b3671d094e653ca91ba90ba95",
"aa72042d3cfb9d1ad02ee24e8b4fca5ed3eaf8cf",
"87893496ae4cebb1ef8ddabadfddcc1330100b3f",
"530f986ea1de9b2184adcbf75a7c42b4a0e741f1",
"d34314ac28065ecafcbebd1d9ac91810d7c9dd48",
"9c307cc36ea57a8476ccc2d996781ea4d2143771",
"da6ef32170fc4e54fb57be90a0486385302c9843",
"a069023d2f77ca45ab4bb7fa4f5d399449673e6f",
"c3b5936f798dd9a493f62a61cd74e4dde1990a1e",
"9a482cf972c3bac597e63429f9e61e566906c5bb",
"40d21ab4933ccba65dfe938f69287b1eb341ccae",
"6a9707eb47201e3bc714ee4efcd3c6989248990f",
"e3059c3db530ef9c6c239fe6dbf1f77a5e680731",
"700a5fc046550c1cc230b2aa510f4e97e5e3ff98",
"65a69125ec8c6190354e5feb550c1fcc63648ece",
"bf87a3a68cbc334c6e02e41af45498a185df1780",
"0c6d1215ff567aa5ca0b11c3507b44052aa51c61",
"408b0ff37ad2d02625c87479ba56ae242fb974d8",
"31b243904b6ffe9a48f588344aa5fae22b6aed23",
"5cbeb67931c43fcf195ff7c5dfb9aef3f9833e03",
"3e2337f6fdd464aa2fb2724e7f59da87f8ea2643",
"6e32c7e193fe76ad598b31cb7771ccc3d5c69d42",
"e165462b571fbf5ff368b3c1489494406d9cd83c",
"c16bed73ab6e3f86028391db0917561d5c934df2",
"e17a6f68b2d8952be9a6e747172e139a7eb900f2",
"1786878d32ae93ead38fe452ef6a0c764b070685",
"90103f1ae256bc925333988644bc8eba362f6262",
"9e24dc0b017fa2ecc910788a5592a255510be0bc",
"6a1b78a4ad998837825cb20cf5116c6cc2cf6994",
"46b42aa6ee6797a51c588ccafaa2468170de9de6",
"818f368136bfa40937ff1796be0db2535ee4a5bc",
"1a98ad51da8a7dc72174ca33e86c4c4c04335181",
}

-- Table of room IDs for Il Drim
ildrim = {
"ce97c9d639febc0d32ce9bfa4af4599fe2ea9879",
"c00828ab0397d805fdd3902ab5901f398d970a91",
"24718babffc9998f156749107283f65b74600402",
"6edd42f9409011bca3148b176b31e9845a046034",
"460fb3a7ddaf37c71dbe627fba4b8dc212ac6ef0",
"141ebbbb72c6ba7593bdfb911aa2b0e47af34315",
"af78213c6deaf7a170f5b2484996b9efde96f365",
}

-- Play sound while MUSHclient is minimized
SetOption ("play_sounds_in_background", 1)

-- Special string function
function string.starts(String,Start)
   return string.sub(String,1,string.len(Start))==Start
end

-- Help file text
function SoundtrackHelp ()
  ColourNote("orange", "black", "Soundtrack Plugin:")
  ColourNote("orange", "black", "==================")
  ColourNote("red",    "black", " * by Mickey, based on soundtrack_v4.zip by Kilstrin (quit)")
  ColourNote("red", "black", " * v.4.1 - https://github.com/nos78/soundtrack")
  ColourNote("red", "black", " * Released under GNU General Public Licence v3.0")
  ColourNote("orange", "black","'help soundtrack'            :  This help information")
  ColourNote("orange", "black","'soundtrack on'              :  Enables Soundtrack Plugin")
  ColourNote("orange", "black","'soundtrack off'             :  Disables Soundtrack Plugin")
  ColourNote("orange", "black","'soundtrack stop'            :  Stops all music currently playing")
  ColourNote("orange", "black","'soundtrack volume <x>'      :  Sets the decibel level of the plugin (more negative is quieter and more positive is louder)")
  ColourNote("orange", "black","'soundtrack current volume'  :  Displays current volume")
  ColourNote("orange", "black","'soundtrack sounds'          :  Displays the folder that the plugin sounds should be located (for debugging installation issues)")
end

-- User input to turn plugin on and off, or stop music
function Soundtrack (sName, sLine, wildcards)
  local sArgument = string.sub(sLine, 12)
  if sArgument == "" then
    return
  end
  sArgument = string.lower(sArgument)
  if sArgument == "on" then
    ColourNote("orange", "black", "Enabling Soundtrack Plugin")
    CallQuow = 1
  end
  if sArgument == "off" then
    ColourNote("orange", "black", "Disabling Soundtrack Plugin")
    CallQuow = 0
  end
  if sArgument == "stop" then
    ColourNote("orange", "black", "Stopping current music")
    StopSound (0)
  end 
  if string.starts(sArgument, "volume ") then
    sVol = string.sub(sArgument, 8)
    Vol = tonumber(sVol)
    StopSound (0)
  end 
  if sArgument == "current volume" then
    ColourNote("orange", "black", "Current volume is " .. Vol)
  end
  if sArgument == "sounds" then
    ColourNote("orange", "black", "Soundtrack plugin v4.1:")
    ColourNote("blue",   "black", " * Looking for sounds in the following folder:")
    ColourNote("blue",   "black", " * " .. SoundsFolder)
  end
end

-- Start up sound
function startup_sound ()
  if CallQuow == 1 then
    PlaySound (5, SoundsFolder .. "Intro.wav", false, -6, 0)
  end
end

function opendoor ()
  if CallQuow == 1 then
    PlaySound (0, SoundsFolder .. "open_door_1.wav", false, Vol, 0)
  end
end

function closedoor ()
  if CallQuow == 1 then
    wait.make (function ()
      wait.time (1)
      PlaySound (0, SoundsFolder .. "close_door_1.wav", false, Vol, 0)
    end)
  end
end

-- Fade out start up sound
function end_startup_sound ()
  if GetSoundStatus(5) > 0 then
    wait.make (function ()
      for i=1, 20 do
        PlaySound (5, "", false, -6 -(i*2))
        wait.time (0.5)
      end
      StopSound (5)
    end)
  end
end

function fight_sound ()
  fighting = 1
  backgroundsound ()
end

-- Fade out fight music
function stop_fight_sound ()
  if fighting == 1 then
    fighting = 0
    wait.make (function ()
      for i=1, 40, 2 do
        PlaySound (7, "", false, Vol -(i*2), 0)
        if GetSoundStatus(9) > 0 then
          PlaySound (9, "", false, Vol -(40/i), 0)
        elseif GetSoundStatus(8) > 0 then
          PlaySound (8, "", false, Vol -(40/i), 0)
        end
        wait.time (0.4)
      end
      StopSound (7)
    end)
  end
end

-- Carriage and Ship sounds when they stop
function shipbell ()
  if CallQuow == 1 then
    PlaySound (0, SoundsFolder .. "ShipBell.wav", false, Vol, 0)
  end
end

-- Passage 
function passage()
  mapID = 55
  locationID = "outside"
  soundstable[55] = SoundsFolder .. "Passage.wav"
end

-- Records the time of day and weather
function weathereffect(sName, sLine, wildcards)
  if string.find (sLine, "night") ~= nil then
    dayornight = "night"
  else
    dayornight = "day"
  end
  if string.find (sLine, "rain") ~= nil then
    weather = "rain"
  elseif string.find (sLine, "sleet") ~= nil then
    weather = "rain"
  elseif string.find (sLine, "snow") ~= nil then
    weather = "snow"
  else
    weather = "fine"
  end
  if string.find (sLine, "no wind") ~= nil then
    wind = nil
  elseif string.find (sLine, "wind") ~= nil or string.find (sLine, "breeze") ~= nil or string.find (sLine, "breezes") ~= nil then
    wind = "wind"
  end
end

function raineffect()
  weather = "rain"
end

function snoweffect()
  weather = "snow"
end

function fineeffect()
  StopSound (6)
  weather = "fine"
end

function sunrise()
  StopSound(8)
  CallQuow = 0
  wait.make (function ()
    PlaySound (8, SoundsFolder .. "Sunrise.wav", false, Vol, 0)
    wait.time (27)
  end)
  CallQuow = 1
  dayornight = "day"
  backgroundsound ()
end

function sunset()
  StopSound(8)
  CallQuow = 0
  wait.make (function ()
    PlaySound (8, SoundsFolder .. "Sunset.wav", false, Vol, 0)
    wait.time (32)
  end)
  CallQuow = 1
  dayornight = "night"
  backgroundsound ()
end

function shivereffect()
  PlaySound (0, SoundsFolder .. "shiver.wav", false, Vol, 0)
end

function sweateffect()
  PlaySound (0, SoundsFolder .. "sweat.wav", false, Vol, 0)
end

-- Compares table elements to room IDs
function compare(t)
  for i=1, #t do
    if t[i] == roomID then
      comparesuccess = 1
      return comparesuccess
    else
      comparesuccess = 0
    end
  end
  return comparesuccess
end 

-- Calls the Map ID that Quow's MiniMap plugin broadcasts
function OnPluginBroadcast (msg, id, name, text)
  if CallQuow == 1 and msg == 1 and string.sub(text, 1, 13) == "minimap.mapid" then
    mapIDstring = string.match (text, "%d+")
    mapID = tonumber(mapIDstring)
  end
  if CallQuow == 1 and msg == 1 and string.sub(text, 1, 9) == "room.info" then
    roomID = string.sub (text, 26, 65)
    if string.find (text, "inside") ~= nil then
      locationID = "inside"
    end
    if string.find (text, "outside") ~= nil then
      locationID = "outside"
    end
    if string.find (roomID, "SandelfonMaze") ~= nil then
      mapID = 55
      soundstable[55] = SoundsFolder .. "Passage.wav"
    end
    if roomID == "2d7f00805acf4e4d9efd98b8b97387c1d7a8007e" then
      StopSound (8)
      soundstable[12] = SoundsFolder .. "Wizards.wav"
      soundstablenight[12] = SoundsFolder .. "Wizards.wav"
    else
      soundstable[12] = SoundsFolder .. "WizardsAM.wav"
      soundstablenight[12] = SoundsFolder .. "WizardsAM.wav"
    end
    if roomID == "509599727f2e0e1592f4580df016a06db20109ce" then
      mapID = 55
      soundstable[55] = SoundsFolder .. "Flying.wav"
    end
    if roomID == "87113bee9b7c36e6634dfaa68abf8e841e2b8445" or roomID == "29ef668b3c7d1b1345fc0f854f74f262ceb6388a" or roomID == "b8ff9474f9fd2cb842c1469a923892042faaa7e7" or roomID == "4c33a2a39f99d7bbb65a641e5fca6e054afc3a5b" then
      mapID = 55
      locationID = "outside"
      soundstable[55] = SoundsFolder .. "Carriage.wav"
    end
    if roomID == "74e87511beba5a5567b2efef189f12b3471e180b" or roomID == "81425257a80e715bbaec5c9c897de8de01dae95d" or roomID == "ad431f7fb0dcd59e802c93d929505431ab0e93ef" or roomID == "0627e181c93e5d40ce8e512dac87fc670dd1d549" or roomID == "f18cd0ac68995b6f928079e50e97284f670ab990" or roomID == "8d72ba64b8effe79c728d15727503d33727b51df" or roomID == "2dbe1f04f43f0697e3cd03d4505bc63367adfa44" or roomID == "8857f945e7e46b1d6a3b0f4d52320c19c87c1938" or roomID == "c2fc5c5ac4166f866c421c4d07a89e9959460dca" or roomID == "ed05668baa44ca63bf7a601a909dc1c5cee70bdd" then
      mapID = 55
      locationID = "outside"
      soundstable[55] = SoundsFolder .. "Ferry.wav"
    end
    if roomID ~= oldroomID then
      if mapID == 1 then
        comparejobs = compare(jobs)
        if comparejobs == 1 then
          locationID = "outside"
        end
        if comparejobs == 1 and soundstable[1] ~= SoundsFolder .. "AM Post Office.wav" then
          StopSound (8)
          soundstable[1] = SoundsFolder .. "AM Post Office.wav"
	  soundstablenight[1] =  SoundsFolder .. "AM Post Office.wav"
        elseif comparejobs == 0 and soundstable[1] == SoundsFolder .. "AM Post Office.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[1] = SoundsFolder .. "AM.wav"
          soundstablenight[1] = SoundsFolder .. "AMNight.wav"
        end
      end
      if mapID == 23 then
        comparedjbharbour = compare(djbharbour)
        if comparedjbharbour == 1 and soundstable[23] ~= SoundsFolder .. "DJBHarbour.wav" then
          StopSound (8)
          soundstable[23] = SoundsFolder .. "DJBHarbour.wav"
          soundstablenight[23] = SoundsFolder .. "DJBHarbourNight.wav"
        elseif comparedjbharbour == 0 and soundstable[23] == SoundsFolder .. "DJBHarbour.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[23] = SoundsFolder .. "Djelibeybi.wav"
          soundstablenight[23] = SoundsFolder .. "DJBNight.wav"
        end 
      end
      if mapID == 31 then
        compareildrim = compare(ildrim)
        if compareildrim == 1 and soundstable[31] ~= SoundsFolder .. "DJBHarbour.wav" then
          StopSound (8)
          soundstable[31] = SoundsFolder .. "DJBHarbour.wav"
          soundstablenight[31] = SoundsFolder .. "DJBHarbourNight.wav"
        elseif compareildrim == 0 and soundstable[31] == SoundsFolder .. "DJBHarbour.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[31] = SoundsFolder .. "Klatch.wav"
          soundstablenight[31] = SoundsFolder .. "KlatchNight.wav"
        end 
      end
      if mapID == 38 then
        comparegrannys = compare(grannys)
        comparegloomy = compare(gloomy)
        compareoc = compare(oc)
        compareramtopsvillages = compare(ramtopsvillages)
        if comparegrannys == 1 then
          locationID = "outside"
        end
        if comparegloomy == 1 and soundstable[38] ~= SoundsFolder .. "Gloomy.wav" then
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Gloomy.wav"
          soundstablenight[38] = SoundsFolder .. "Gloomy.wav"
        elseif comparegrannys == 1 and soundstable[38] ~= SoundsFolder .. "Grannys.wav" then 
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Grannys.wav"
          soundstablenight[38] = SoundsFolder .. "Grannys.wav"
        elseif compareoc == 1 and soundstable[38] ~= SoundsFolder .. "OC.wav" then 
          StopSound (8)
          soundstable[38] = SoundsFolder .. "OC.wav"
          soundstablenight[38] = SoundsFolder .. "OCNight.wav"
        elseif compareramtopsvillages == 1 and soundstable[38] ~= SoundsFolder .. "Lancre.wav" then 
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Lancre.wav"
          soundstablenight[38] = SoundsFolder .. "LancreNight.wav"
        elseif comparegloomy == 0 and soundstable[38] == SoundsFolder .. "Gloomy.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Ramtops.wav"
          soundstablenight[38] = SoundsFolder .. "RamtopsNight.wav"
        elseif comparegrannys == 0 and soundstable[38] == SoundsFolder .. "Grannys.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Ramtops.wav"
          soundstablenight[38] = SoundsFolder .. "RamtopsNight.wav"
        elseif compareoc == 0 and soundstable[38] == SoundsFolder .. "OC.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Ramtops.wav"
          soundstablenight[38] = SoundsFolder .. "RamtopsNight.wav"
        elseif compareramtopsvillages == 0 and soundstable[38] == SoundsFolder .. "Lancre.wav" and GetSoundStatus(8) > 0 then
          StopSound (8)
          soundstable[38] = SoundsFolder .. "Ramtops.wav"
          soundstablenight[38] = SoundsFolder .. "RamtopsNight.wav"
        end
      end
      if mapID == 45 then
        compareholywood = compare(holywood)
        comparestovillages = compare(stovillages)
        if compareholywood == 1 and soundstable[45] ~= SoundsFolder .. "Holywood.wav" then
          StopSound (8)
          soundstable[45] = SoundsFolder .. "Holywood.wav"
          soundstablenight[45] = SoundsFolder .. "Holywood.wav"
        elseif comparestovillages == 1 and soundstable[45] ~= SoundsFolder .. "StoVillages.wav" then
          StopSound (8)
          soundstable[45] = SoundsFolder .. "StoVillages.wav"
          soundstablenight[45] = SoundsFolder .. "StoVillagesNight.wav"
        elseif compareholywood == 0 and soundstable[45] == SoundsFolder .. "Holywood.wav" and GetSoundStatus(8) > 0 then
          StopSound(8)
          soundstable[45] = SoundsFolder .. "Sto plains.wav"
          soundstablenight[45] = SoundsFolder .. "StoPlainsNight.wav"
        elseif comparestovillages == 0 and soundstable[45] == SoundsFolder .. "StoVillages.wav" and GetSoundStatus(8) > 0 then
          StopSound(8)
          soundstable[45] = SoundsFolder .. "Sto plains.wav"
          soundstablenight[45] = SoundsFolder .. "StoPlainsNight.wav"
        end
      end
      if mapID == 46 then
        compareblackglass = compare(blackglass)
        compareescrow = compare(escrow)
        if compareblackglass == 1 and soundstable[46] ~= SoundsFolder .. "Lancre.wav" then
          StopSound (8)
          soundstable[46] = SoundsFolder .. "Lancre.wav"
          soundstablenight[46] = SoundsFolder .. "LancreNight.wav"
        elseif compareescrow == 1 and soundstable[46] ~= SoundsFolder .. "Escrow.wav" then
          StopSound (8)
          soundstable[46] = SoundsFolder .. "Escrow.wav"
          soundstablenight[46] = SoundsFolder .. "EscrowNight.wav"
        elseif compareblackglass == 0 and soundstable[46] == SoundsFolder .. "Lancre.wav" and GetSoundStatus(8) > 0 then
          StopSound(8)
          soundstable[46] = SoundsFolder .. "Uberwald.wav"
          soundstablenight[46] = SoundsFolder .. "UberwaldNight.wav"
        elseif compareescrow == 0 and soundstable[46] == SoundsFolder .. "Escrow.wav" and GetSoundStatus(8) > 0 then
          StopSound(8)
          soundstable[46] = SoundsFolder .. "Uberwald.wav"
          soundstablenight[46] = SoundsFolder .. "UberwaldNight.wav"
        end
      end
      oldroomID = roomID
    end
  end
  backgroundsound ()
end

-- Plays the background music
function backgroundsound ()
  if CallQuow == 1 and fighting == 0 then
    -- Stops music if the player has moved to a different map
    if mapID ~= oldmapID then
      StopSound (8)
      StopSound (6)
      oldmapID = mapID
    elseif mapID == oldmapID and dayornight == "day" then
      if GetSoundStatus(8) < 1 then
        PlaySound (8, soundstable[mapID], false, Vol, 0)
      end
    elseif mapID == oldmapID and dayornight == "night" then
      if GetSoundStatus(8) < 1 then
        PlaySound (8, soundstablenight[mapID], false, Vol, 0)
      end
    end
    if locationID == "inside" and indoormusic[mapID] ~= "" then
      if GetSoundStatus(8) > 0 then
        StopSound(8)
      end
      if GetSoundStatus(9) < 1 then
        PlaySound (9, indoormusic[mapID], false, Vol, 0)
      end
    else
      if GetSoundStatus(9) > 0 then
        StopSound(9)
      end
    end    
  -- Starts fighting music
  elseif CallQuow == 1 and fighting == 1 then
    if GetSoundStatus(9) > 0 then
      PlaySound (9, "", false, Vol-40, 0)    
    elseif GetSoundStatus(8) > 0 then
      PlaySound (8, "", false, Vol-40, 0)
    end
    if GetSoundStatus(7) < 1 then
      PlaySound (7, fightingtable[mapID], false, Vol, 0)
    end
  end
  if CallQuow == 1 and GetSoundStatus(6) < 1 then
    if wind == "wind" then
      PlaySound (6, SoundsFolder .. "wind.wav", false, Vol, 0)
    end
    if weather == "rain" then
      PlaySound (6, SoundsFolder .. "rain.wav", false, Vol, 0)
    end
    if weather == "snow" then
      PlaySound (6, SoundsFolder .. "snow.wav", false, Vol, 0)
    end
  end
end

function konamicode ()
  CallQuow = 0
  StopSound (0)
  wait.make (function ()
    PlaySound (8, SoundsFolder .. "Konami.wav", false, Vol, 0)
    wait.time (169)
  end)
  CallQuow = 1
end

-- Saves oldmapID variable to be called up on next login
function OnPluginSaveState()
  SetVariable("oldmapID", oldmapID)
  SetVariable("Vol", Vol)
  SetVariable("CallQuow", CallQuow)
end

-- Stops sound after disconnecting
function OnPluginDisconnect()
  StopSound (0)
end

]]>
</script>


</muclient>
